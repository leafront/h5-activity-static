<!DOCTYPE html>
<html data-time="<%= htmlWebpackPlugin.options.getTime%>">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-dns-prefetch-control" content="on"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name=apple-mobile-web-app-capable content=yes>
  <link rel="dns-prefetch" href="<%= htmlWebpackPlugin.options.staticPath %>"/>
  <meta http-equiv="cache-control" content="no-store">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  <meta http-equiv=pragma content=no-cache>
  <meta content="telephone=no" name="format-detection">
  <meta name="applicable-device"content="mobile">
  <meta name="apple-mobile-web-app-title" content="来伊份">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="white">
  <meta name="theme-color" content="#ff6900">
  <link rel="apple-touch-icon-precomposed" href="<%= htmlWebpackPlugin.options.staticPath %>/webapp-static/images/touch-icon-iphone.png" />
  <link rel="apple-touch-startup-image" href="<%= htmlWebpackPlugin.options.staticPath %>/webapp-static/images/touch-icon-iphone.png" />
  <link href="<%= htmlWebpackPlugin.options.staticPath %>/webapp-static/images/touch-icon-iphone.png" rel="Shortcut Icon" type="image/x-icon" />
  <meta name="viewport" content="width=device-width,initial-scale=1, minimum-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover">
  <title>来伊份</title>
  <script type="text/javascript">
    (function (win) {
      var flex = function flex() {
        var ua = navigator.userAgent;
        var matches = ua.match(/Android[\S\s]+AppleWebkit\/(\d{3})/i);
        var UCversion = ua.match(/U3\/((\d+|\.){5,})/i);
        var isUCHd = UCversion && parseInt(UCversion[1].split('.').join(''), 10) >= 80;
        var isIos = navigator.appVersion.match(/(iphone|ipad|ipod)/gi);
        var dpr = win.devicePixelRatio || 1;
        if (!isIos && !(matches && matches[1] > 534) && !isUCHd) {
          // 如果非iOS, 非Android4.3以上, 非UC内核, 就不执行高清, dpr设为1;
          dpr = 1;
        }
        var scale =  1 / dpr;
        var metaEl = document.querySelector('meta[name="viewport"]');
        if (!metaEl) {
          metaEl = document.createElement('meta');
          metaEl.setAttribute('name', 'viewport');
          document.head.appendChild(metaEl);
        }

        var clientWidth = document.documentElement.clientWidth || 375

        var docFontSize = 50 + 'px'
        if (clientWidth <= 1200) {
          docFontSize = (clientWidth * dpr) / 7.5 + 'px';
          if (clientWidth < 375 && !isIos && dpr <= 2) {
            docFontSize = parseInt((clientWidth * dpr * 1.04167) / 7.5) + 'px';
          }
        }
        var isNativeApp = navigator.userAgent.indexOf('ody') > -1
        if (isNativeApp) {
          metaEl.setAttribute('content', 'width=device-width,user-scalable=no,initial-scale=' + scale + ',maximum-scale=' + scale + ',minimum-scale=' + scale);
        } else {
          metaEl.setAttribute('content', 'width=device-width,user-scalable=no,initial-scale=' + scale + ',maximum-scale=' + scale + ',minimum-scale=' + scale + ',viewport-fit=cover');
        }
        document.documentElement.style.fontSize = docFontSize;
      };
      flex();
    })(window);
  </script>
</head>
<body>
<div id="app"></div>
<!-- built files will be auto injected -->
<script type="text/javascript">
  function isLocalStorageSupported() {
    var testKey = 'test',
      storage = window.sessionStorage
    try {
      storage.setItem(testKey, 'testValue')
      storage.removeItem(testKey)
      return true
    } catch (error) {
      return false
    }
  }

  function isPassive() {

    var supportsPassiveOption = false
    try {
      addEventListener("test", null, Object.defineProperty({}, 'passive', {
        get: function () {
          supportsPassiveOption = true
        }
      }));
    } catch(e) {}
    return supportsPassiveOption   //{passive: true} 就不会调用 preventDefault 来阻止默认滑动行为

  }

  var overscroll = function () {
    document.body.addEventListener('touchstart', topScroll, this.isPassive() ? {passive: true} : false)
    document.body.addEventListener('touchmove', botScroll, this.isPassive() ? {passive: true} : false)
  }

  overscroll()

  function topScroll () {

    var top = scrollEl.scrollTop
      , totalScroll = scrollEl.scrollHeight
      , currentScroll = top + scrollEl.offsetHeight
    //If we're at the top or the bottom of the containers
    //scroll, push up or down one pixel.
    //
    //this prevents the scroll from "passing through" to
    //the body.

    if(top === 0) {
      scrollEl.scrollTop = 1
    } else if(currentScroll === totalScroll) {
      scrollEl.scrollTop = top - 1
    }

  }

  function  botScroll (evt) {
    //if the content is actually scrollable, i.e. the content is long enough
    //that scrolling can occur

    if(scrollEl.offsetHeight < scrollEl.scrollHeight) {
      evt._isScroller = true
    }

  }
  function appendScript (res) {
    var script = document.createElement('script')
    script.type = 'text/javascript'
    script.appendChild(document.createTextNode(res))
    document.head.appendChild(script)
  }
  function writeLizard () {
    document.write('<script type="text/javascript" src="<%=htmlWebpackPlugin.options.staticPath %>/webapp-static/lizard/index.js"><\/script>')
  }
  if (isLocalStorageSupported()) {
    var results = localStorage.getItem('/webapp-static/lizard/index.js')
    if (results && typeof results == 'string') {
      var res = JSON.parse(results)
      if (res && res.times > new Date().getTime()) {
        appendScript(res.results)
      } else {
        writeLizard()
      }
    } else {
      writeLizard()
    }
  } else {
    writeLizard()
  }
</script>
<!-- <script type="text/javascript" src="<%= htmlWebpackPlugin.options.staticPath %>/webapp-static/vconsole/index.js"></script>
<script>
var vconsole = new VConsole()
</script> -->
</body>
</html>
